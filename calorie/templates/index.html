<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calorie Burn Predictor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Calorie Burn Calculator</h1>
        </div>
        
        <div class="form-container">
            <form id="prediction-form">
                <div class="input-group">
                    <label for="gender">Gender</label>
                    <select id="gender" required>
                        <option value="" disabled selected>Select your gender</option>
                        <option value="0">Male</option>
                        <option value="1">Female</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="age">Age (years)</label>
                    <input type="number" id="age" min="10" max="100" required>
                </div>
                
                <div class="input-group">
                    <label for="height">Height (cm)</label>
                    <input type="number" id="height" min="100" max="250" step="0.1" required>
                </div>
                
                <div class="input-group">
                    <label for="weight">Weight (kg)</label>
                    <input type="number" id="weight" min="30" max="200" step="0.1" required>
                </div>
                
                <div class="input-group">
                    <label for="duration">Exercise Duration (minutes)</label>
                    <input type="number" id="duration" min="1" max="300" required>
                </div>
                
                <div class="input-group">
                    <label for="heart_rate">Average Heart Rate (bpm)</label>
                    <input type="number" id="heart_rate" min="40" max="200" required>
                </div>
                
                <div class="input-group">
                    <label for="body_temp">Body Temperature (Â°C)</label>
                    <input type="number" id="body_temp" min="36" max="42" step="0.1" required>
                </div>
                
                <button type="submit" class="btn">
                    <span class="btn-text">Calculate Calories Burned</span>
                </button>
            </form>
        </div>
        
        <div class="result-container" id="result">
            <h2>Estimated Calories Burned</h2>
            <div class="result-value" id="prediction-value">0.00</div>
            <p>kilocalories</p>
        </div>
    </div>

    <script>
        document.getElementById('prediction-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const btn = e.target.querySelector('button');
            const btnText = btn.querySelector('.btn-text');
            btn.disabled = true;
            btnText.textContent = 'Calculating...';
            
            try {
                const formData = {
                    gender: document.getElementById('gender').value,
                    age: document.getElementById('age').value,
                    height: document.getElementById('height').value,
                    weight: document.getElementById('weight').value,
                    duration: document.getElementById('duration').value,
                    heart_rate: document.getElementById('heart_rate').value,
                    body_temp: document.getElementById('body_temp').value
                };
                
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                const data = await response.json();
                
                if (data.status === 'success') {
                    document.getElementById('prediction-value').textContent = data.prediction;
                    document.getElementById('result').style.display = 'block';
                    
                    // Smooth scroll to result
                    document.getElementById('result').scrollIntoView({ 
                        behavior: 'smooth' 
                    });
                } else {
                    alert('Error: ' + data.message);
                }
            } catch (error) {
                alert('Network error: ' + error.message);
            } finally {
                btn.disabled = false;
                btnText.textContent = 'Calculate Calories Burned';
            }
        });
    </script>
</body>
</html>